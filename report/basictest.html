<html>
<head>
  <meta charset='utf-8' />
  <title>mruby/c test report</title>
  <script type='text/javascript' src='jquery-3.1.1.min.js'></script>
  <style>
    h2.test-category { text-decoration: underline; }
    h2.test-category:hover { cursor: pointer; }
    pre.console {
      float: left;
      width: 33%;
      overflow-x: auto;
      border: 1px dotted #eee;
    }
    div.test-detail { display: none; }
    .segv { color: #ca0; }
    .ok { color: green; }
    .ng { color: #a00; }
  </style>
</head>
<body>

  
    <div>
      <h2 class='test-category ok' data-idx='0'>
        test_array.rb
      </h2>
      <div class='test-detail' data-idx='0'>
        
          
          <pre class='console rb_txt'>test_check &quot;array&quot;
test_ok([1, 2] + [3, 4] == [1, 2, 3, 4])
#test_ok([1, 2] * 2 == [1, 2, 1, 2])
# mrubyで通らない
#test_ok([1, 2] * &quot;:&quot; == &quot;1:2&quot;)

#test_ok([1, 2].hash == [1, 2].hash)

#test_ok([1,2,3] &amp; [2,3,4] == [2,3])
#test_ok([1,2,3] | [2,3,4] == [1,2,3,4])
#test_ok([1,2,3] - [2,3] == [1])

$x = [0, 1, 2, 3, 4, 5]
test_ok($x[2] == 2)
#test_ok($x[1..3] == [1, 2, 3])
#test_ok($x[1,3] == [1, 2, 3])

#$x[0, 2] = 10
#test_ok($x[0] == 10 &amp;&amp; $x[1] == 2)
#
#$x[0, 0] = -1
#test_ok($x[0] == -1 &amp;&amp; $x[1] == 10)
#
#$x[-1, 1] = 20
#test_ok($x[-1] == 20 &amp;&amp; $x.pop == 20)

## array and/or
#test_ok(([1,2,3]&amp;[2,4,6]) == [2])
#test_ok(([1,2,3]|[2,4,6]) == [1,2,3,4,6])
#
## compact
#$x = [nil, 1, nil, nil, 5, nil, nil]
#$x.compact!
#test_ok($x == [1, 5])
#
## uniq
#$x = [1, 1, 4, 2, 5, 4, 5, 1, 2]
#$x.uniq!
#test_ok($x == [1, 4, 2, 5])

# empty?
test_ok(!$x.empty?)
$x = []
test_ok($x.empty?)

## sort
#$x = [&quot;it&quot;, &quot;came&quot;, &quot;to&quot;, &quot;pass&quot;, &quot;that&quot;, &quot;...&quot;]
#$x = $x.sort.join(&quot; &quot;)
#test_ok($x == &quot;... came it pass that to&quot;)
#$x = [2,5,3,1,7]
#$x.sort!{|a,b| a&lt;=&gt;b}		# sort with condition
#test_ok($x == [1,2,3,5,7])
#$x.sort!{|a,b| b-a}		# reverse sort
#test_ok($x == [7,5,3,2,1])

## split test
#$x = &quot;The Book of Mormon&quot;
##test_ok($x.split(//).reverse!.join == $x.reverse)
#test_ok($x.reverse == $x.reverse!)
##test_ok(&quot;1 byte string&quot;.split(//).reverse.join(&quot;:&quot;) == &quot;g:n:i:r:t:s: :e:t:y:b: :1&quot;)
#$x = &quot;a b c  d&quot;
#test_ok($x.split == [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;])
#test_ok($x.split(&#39; &#39;) == [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;])
##test_ok(defined? &quot;a&quot;.chomp)
##test_ok(&quot;abc&quot;.scan(/./) == [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])
##test_ok(&quot;1a2b3c&quot;.scan(/(\d.)/) == [[&quot;1a&quot;], [&quot;2b&quot;], [&quot;3c&quot;]])
## non-greedy match
##test_ok(&quot;a=12;b=22&quot;.scan(/(.*?)=(\d*);?/) == [[&quot;a&quot;, &quot;12&quot;], [&quot;b&quot;, &quot;22&quot;]])

#$x = [1]
#test_ok(($x * 5).join(&quot;:&quot;) == &#39;1:1:1:1:1&#39;)
#test_ok(($x * 1).join(&quot;:&quot;) == &#39;1&#39;)
#test_ok(($x * 0).join(&quot;:&quot;) == &#39;&#39;)

# Range#to_aのテストと思われる
#*$x = *(1..7).to_a
#test_ok($x.size == 7)
#test_ok($x == [1, 2, 3, 4, 5, 6, 7])

#$x = [1,2,3]
#$x[1,0] = $x
#test_ok($x == [1,1,2,3,2,3])
#
#$x = [1,2,3]
#$x[-1,0] = $x
#test_ok($x == [1,2,1,2,3,3])

#$x = [1,2,3]
#$x.concat($x)
#test_ok($x == [1,2,3,1,2,3])
</pre>
          <pre class='console out_txt'>-- array
ok 1
ok 2
ok 3
ok 4
</pre>
          <pre class='console cruby_txt'>-- array
ok 1
ok 2
ok 3
ok 4
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ng' data-idx='1'>
        test_assignment1.rb
      </h2>
      <div class='test-detail' data-idx='1'>
        
          
          <pre class='console rb_txt'>a=[]; a[0] ||= &quot;bar&quot;;
test_ok(a[0] == &quot;bar&quot;)
#h={}; h[&quot;foo&quot;] ||= &quot;bar&quot;;
#test_ok(h[&quot;foo&quot;] == &quot;bar&quot;)

aa = 5
aa ||= 25
test_ok(aa == 5)
bb ||= 25
test_ok(bb == 25)
cc &amp;&amp;=33
test_ok(cc == nil)
cc = 5
cc &amp;&amp;=44
test_ok(cc == 44)
</pre>
          <pre class='console out_txt'>no method(+)!
no method(to_s)!
not ok  1 (n: bar)
ok 2
no method(+)!
not ok  3 (n: 25)
no method(+)!
no method(to_s)!
no method(+)!
not ok  4 (n: )
ok 5
</pre>
          <pre class='console cruby_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ok' data-idx='2'>
        test_assignment2.rb
      </h2>
      <div class='test-detail' data-idx='2'>
        
          
          <pre class='console rb_txt'>a = nil; test_ok(a == nil)
a = 1; test_ok(a == 1)
a = []; test_ok(a == [])
a = [1]; test_ok(a == [1])
a = [nil]; test_ok(a == [nil])
a = [[]]; test_ok(a == [[]])
a = [1,2]; test_ok(a == [1,2])
a = [*[]]; test_ok(a == [])
a = [*[1]]; test_ok(a == [1])
a = [*[1,2]]; test_ok(a == [1,2])

a = *[]; test_ok(a == [])
a = *[1]; test_ok(a == [1])
a = *[nil]; test_ok(a == [nil])
a = *[[]]; test_ok(a == [[]])
a = *[1,2]; test_ok(a == [1,2])
a = *[*[]]; test_ok(a == [])
a = *[*[1]]; test_ok(a == [1])
a = *[*[1,2]]; test_ok(a == [1,2])
</pre>
          <pre class='console out_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
</pre>
          <pre class='console cruby_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ng' data-idx='3'>
        test_assignment3.rb
      </h2>
      <div class='test-detail' data-idx='3'>
        
          
          <pre class='console rb_txt'>a, = nil; test_ok(a == nil)
a, = 1; test_ok(a == 1)
a, = []; test_ok(a == nil)
a, = [1]; test_ok(a == 1)
a, = [nil]; test_ok(a == nil)
a, = [[]]; test_ok(a == [])
a, = 1,2; test_ok(a == 1)
a, = [1,2]; test_ok(a == 1)
a, = [*[]]; test_ok(a == nil)
a, = [*[1]]; test_ok(a == 1)
a, = *[1,2]; test_ok(a == 1)
a, = [*[1,2]]; test_ok(a == 1)

a, = *[]; test_ok(a == nil)
a, = *[1]; test_ok(a == 1)
a, = *[nil]; test_ok(a == nil)
a, = *[[]]; test_ok(a == [])
a, = *[1,2]; test_ok(a == 1)
a, = *[*[]]; test_ok(a == nil)
a, = *[*[1]]; test_ok(a == 1)
a, = *[*[1,2]]; test_ok(a == 1)
</pre>
          <pre class='console out_txt'>Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  1 (n: )
Skip OP=3A
no method(+)!
not ok  2 (n: 1)
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  3 (n: )
ok 4
ok 5
ok 6
ok 7
ok 8
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  9 (n: )
Skip OP=3A
ok 10
Skip OP=3A
ok 11
Skip OP=3A
ok 12
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  13 (n: )
Skip OP=3A
ok 14
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  15 (n: )
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  16 (n: )
Skip OP=3A
ok 17
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  18 (n: )
Skip OP=3A
ok 19
Skip OP=3A
ok 20
</pre>
          <pre class='console cruby_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
ok 19
ok 20
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category segv' data-idx='4'>
        test_assignment4.rb
      </h2>
      <div class='test-detail' data-idx='4'>
        
          
          <pre class='console rb_txt'>*a = nil; test_ok(a == [nil])
*a = 1; test_ok(a == [1])
*a = []; test_ok(a == [])
*a = [1]; test_ok(a == [1])
*a = [nil]; test_ok(a == [nil])
*a = [[]]; test_ok(a == [[]])
*a = [1,2]; test_ok(a == [1,2])
*a = [*[]]; test_ok(a == [])
*a = [*[1]]; test_ok(a == [1])
*a = [*[1,2]]; test_ok(a == [1,2])

*a = *[]; test_ok(a == [])
*a = *[1]; test_ok(a == [1])
*a = *[nil]; test_ok(a == [nil])
*a = *[[]]; test_ok(a == [[]])
*a = *[1,2]; test_ok(a == [1,2])
*a = *[*[]]; test_ok(a == [])
*a = *[*[1]]; test_ok(a == [1])
*a = *[*[1,2]]; test_ok(a == [1,2])

a,b,*c = nil; test_ok([a,b,c] == [nil,nil,[]])
a,b,*c = 1; test_ok([a,b,c] == [1,nil,[]])
a,b,*c = []; test_ok([a,b,c] == [nil,nil,[]])
a,b,*c = [1]; test_ok([a,b,c] == [1,nil,[]])
a,b,*c = [nil]; test_ok([a,b,c] == [nil,nil,[]])
a,b,*c = [[]]; test_ok([a,b,c] == [[],nil,[]])
a,b,*c = [1,2]; test_ok([a,b,c] == [1,2,[]])
a,b,*c = [*[]]; test_ok([a,b,c] == [nil,nil,[]])
a,b,*c = [*[1]]; test_ok([a,b,c] == [1,nil,[]])
a,b,*c = [*[1,2]]; test_ok([a,b,c] == [1,2,[]])

a,b,*c = *[]; test_ok([a,b,c] == [nil,nil,[]])
a,b,*c = *[1]; test_ok([a,b,c] == [1,nil,[]])
a,b,*c = *[nil]; test_ok([a,b,c] == [nil,nil,[]])
a,b,*c = *[[]]; test_ok([a,b,c] == [[],nil,[]])
a,b,*c = *[1,2]; test_ok([a,b,c] == [1,2,[]])
a,b,*c = *[*[]]; test_ok([a,b,c] == [nil,nil,[]])
a,b,*c = *[*[1]]; test_ok([a,b,c] == [1,nil,[]])
a,b,*c = *[*[1,2]]; test_ok([a,b,c] == [1,2,[]])

#def f; yield nil; end; f {|a| test_ok(a == nil)}
#def f; yield 1; end; f {|a| test_ok(a == 1)}
#def f; yield []; end; f {|a| test_ok(a == [])}
#def f; yield [1]; end; f {|a| test_ok(a == [1])}
#def f; yield [nil]; end; f {|a| test_ok(a == [nil])}
#def f; yield [[]]; end; f {|a| test_ok(a == [[]])}
#def f; yield [*[]]; end; f {|a| test_ok(a == [])}
#def f; yield [*[1]]; end; f {|a| test_ok(a == [1])}
#def f; yield [*[1,2]]; end; f {|a| test_ok(a == [1,2])}
#def f; yield *[]; end; f {|a| test_ok(a == nil)}
#def f; yield *[1]; end; f {|a| test_ok(a == 1)}
#def f; yield *[nil]; end; f {|a| test_ok(a == nil)}
#def f; yield *[[]]; end; f {|a| test_ok(a == [])}
#def f; yield *[*[]]; end; f {|a| test_ok(a == nil)}
#def f; yield *[*[1]]; end; f {|a| test_ok(a == 1)}
#def f; yield *[*[1,2]]; end; f {|a| test_ok(a == 1)}
#
#def f; yield; end; f {|a,| test_ok(a == nil)}
#def f; yield nil; end; f {|a,| test_ok(a == nil)}
#def f; yield 1; end; f {|a,| test_ok(a == 1)}
#def f; yield []; end; f {|a,| test_ok(a == nil)}
#def f; yield [1]; end; f {|a,| test_ok(a == 1)}
#def f; yield [nil]; end; f {|a,| test_ok(a == nil)}
#def f; yield [[]]; end; f {|a,| test_ok(a == [])}
#def f; yield [*[]]; end; f {|a,| test_ok(a == nil)}
#def f; yield [*[1]]; end; f {|a,| test_ok(a == 1)}
#def f; yield [*[1,2]]; end; f {|a,| test_ok(a == 1)}
#
#def f; yield *[]; end; f {|a,| test_ok(a == nil)}
#def f; yield *[1]; end; f {|a,| test_ok(a == 1)}
#def f; yield *[nil]; end; f {|a,| test_ok(a == nil)}
#def f; yield *[[]]; end; f {|a,| test_ok(a == nil)}
#def f; yield *[*[]]; end; f {|a,| test_ok(a == nil)}
#def f; yield *[*[1]]; end; f {|a,| test_ok(a == 1)}
#def f; yield *[*[1,2]]; end; f {|a,| test_ok(a == 1)}
#
#def f; yield; end; f {|*a| test_ok(a == [])}
#def f; yield nil; end; f {|*a| test_ok(a == [nil])}
#def f; yield 1; end; f {|*a| test_ok(a == [1])}
#def f; yield []; end; f {|*a| test_ok(a == [[]])}
#def f; yield [1]; end; f {|*a| test_ok(a == [[1]])}
#def f; yield [nil]; end; f {|*a| test_ok(a == [[nil]])}
#def f; yield [[]]; end; f {|*a| test_ok(a == [[[]]])}
#def f; yield [1,2]; end; f {|*a| test_ok(a == [[1,2]])}
#def f; yield [*[]]; end; f {|*a| test_ok(a == [[]])}
#def f; yield [*[1]]; end; f {|*a| test_ok(a == [[1]])}
#def f; yield [*[1,2]]; end; f {|*a| test_ok(a == [[1,2]])}
#
#def f; yield *[]; end; f {|*a| test_ok(a == [])}
#def f; yield *[1]; end; f {|*a| test_ok(a == [1])}
#def f; yield *[nil]; end; f {|*a| test_ok(a == [nil])}
#def f; yield *[[]]; end; f {|*a| test_ok(a == [[]])}
#def f; yield *[*[]]; end; f {|*a| test_ok(a == [])}
#def f; yield *[*[1]]; end; f {|*a| test_ok(a == [1])}
#def f; yield *[*[1,2]]; end; f {|*a| test_ok(a == [1,2])}
#
#def f; yield; end; f {|a,b,*c| test_ok([a,b,c] == [nil,nil,[]])}
#def f; yield nil; end; f {|a,b,*c| test_ok([a,b,c] == [nil,nil,[]])}
#def f; yield 1; end; f {|a,b,*c| test_ok([a,b,c] == [1,nil,[]])}
#def f; yield []; end; f {|a,b,*c| test_ok([a,b,c] == [nil,nil,[]])}
#def f; yield [1]; end; f {|a,b,*c| test_ok([a,b,c] == [1,nil,[]])}
#def f; yield [nil]; end; f {|a,b,*c| test_ok([a,b,c] == [nil,nil,[]])}
#def f; yield [[]]; end; f {|a,b,*c| test_ok([a,b,c] == [[],nil,[]])}
#def f; yield [*[]]; end; f {|a,b,*c| test_ok([a,b,c] == [nil,nil,[]])}
#def f; yield [*[1]]; end; f {|a,b,*c| test_ok([a,b,c] == [1,nil,[]])}
#def f; yield [*[1,2]]; end; f {|a,b,*c| test_ok([a,b,c] == [1,2,[]])}
#
#def f; yield *[]; end; f {|a,b,*c| test_ok([a,b,c] == [nil,nil,[]])}
#def f; yield *[1]; end; f {|a,b,*c| test_ok([a,b,c] == [1,nil,[]])}
#def f; yield *[nil]; end; f {|a,b,*c| test_ok([a,b,c] == [nil,nil,[]])}
#def f; yield *[[]]; end; f {|a,b,*c| test_ok([a,b,c] == [nil,nil,[]])}
#def f; yield *[*[]]; end; f {|a,b,*c| test_ok([a,b,c] == [nil,nil,[]])}
#def f; yield *[*[1]]; end; f {|a,b,*c| test_ok([a,b,c] == [1,nil,[]])}
#def f; yield *[*[1,2]]; end; f {|a,b,*c| test_ok([a,b,c] == [1,2,[]])}
</pre>
          <pre class='console out_txt'>Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  1 (n: )
Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  2 (n: )
Skip OP=3C
ok 3
ok 4
ok 5
ok 6
ok 7
Skip OP=3C
ok 8
Skip OP=3C
ok 9
Skip OP=3C
ok 10
Skip OP=3C
ok 11
Skip OP=3C
ok 12
Skip OP=3C
ok 13
Skip OP=3C
ok 14
Skip OP=3C
ok 15
Skip OP=3C
ok 16
Skip OP=3C
ok 17
Skip OP=3C
ok 18
Skip OP=3A
Skip OP=3A
Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  19 (n: )
Skip OP=3A
Skip OP=3A
Skip OP=3C
Segmentation fault (core dumped)
[New LWP 36955]
Core was generated by `/home/yhara/work/mrubyc_test/mrubyc/sample_c/mrubyc test/mrubytest.mrb&#39;.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00000000004032f0 in ?? ()
#0  0x00000000004032f0 in ?? ()
#1  0x00007fff8489eb40 in ?? ()
#2  0x000000000060a3e2 in ?? ()
#3  0x008081b78489eb40 in ?? ()
#4  0x000000000060a3c0 in ?? ()
#5  0x0000000200000001 in ?? ()
#6  0x0000000100000003 in ?? ()
#7  0x0080000a0060a210 in ?? ()
#8  0x0000000000000000 in ?? ()
</pre>
          <pre class='console cruby_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
ok 19
ok 20
ok 21
ok 22
ok 23
ok 24
ok 25
ok 26
ok 27
ok 28
ok 29
ok 30
ok 31
ok 32
ok 33
ok 34
ok 35
ok 36
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category segv' data-idx='5'>
        test_assignment5.rb
      </h2>
      <div class='test-detail' data-idx='5'>
        
          
          <pre class='console rb_txt'>def r; return; end; a = r(); test_ok(a == nil)
def r; return nil; end; a = r(); test_ok(a == nil)
def r; return 1; end; a = r(); test_ok(a == 1)
def r; return []; end; a = r(); test_ok(a == [])
def r; return [1]; end; a = r(); test_ok(a == [1])
def r; return [nil]; end; a = r(); test_ok(a == [nil])
def r; return [[]]; end; a = r(); test_ok(a == [[]])
def r; return [*[]]; end; a = r(); test_ok(a == [])
def r; return [*[1]]; end; a = r(); test_ok(a == [1])
def r; return [*[1,2]]; end; a = r(); test_ok(a == [1,2])

def r; return *[]; end; a = r(); test_ok(a == [])
def r; return *[1]; end; a = r(); test_ok(a == [1])
def r; return *[nil]; end; a = r(); test_ok(a == [nil])
def r; return *[[]]; end; a = r(); test_ok(a == [[]])
def r; return *[*[]]; end; a = r(); test_ok(a == [])
def r; return *[*[1]]; end; a = r(); test_ok(a == [1])
def r; return *[*[1,2]]; end; a = r(); test_ok(a == [1,2])

def r; return *[[]]; end; a = *r(); test_ok(a == [[]])
def r; return *[*[1,2]]; end; a = *r(); test_ok(a == [1,2])
</pre>
          <pre class='console out_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
Segmentation fault (core dumped)
[New LWP 36955]
Core was generated by `/home/yhara/work/mrubyc_test/mrubyc/sample_c/mrubyc test/mrubytest.mrb&#39;.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00000000004032f0 in ?? ()
#0  0x00000000004032f0 in ?? ()
#1  0x00007fff8489eb40 in ?? ()
#2  0x000000000060a3e2 in ?? ()
#3  0x008081b78489eb40 in ?? ()
#4  0x000000000060a3c0 in ?? ()
#5  0x0000000200000001 in ?? ()
#6  0x0000000100000003 in ?? ()
#7  0x0080000a0060a210 in ?? ()
#8  0x0000000000000000 in ?? ()
</pre>
          <pre class='console cruby_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
ok 19
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category segv' data-idx='6'>
        test_assignment6.rb
      </h2>
      <div class='test-detail' data-idx='6'>
        
          
          <pre class='console rb_txt'>def r; return; end; *a = r(); test_ok(a == [nil])
def r; return nil; end; *a = r(); test_ok(a == [nil])
def r; return 1; end; *a = r(); test_ok(a == [1])
def r; return []; end; *a = r(); test_ok(a == [])
def r; return [1]; end; *a = r(); test_ok(a == [1])
def r; return [nil]; end; *a = r(); test_ok(a == [nil])
def r; return [[]]; end; *a = r(); test_ok(a == [[]])
def r; return [1,2]; end; *a = r(); test_ok(a == [1,2])
def r; return [*[]]; end; *a = r(); test_ok(a == [])
def r; return [*[1]]; end; *a = r(); test_ok(a == [1])
def r; return [*[1,2]]; end; *a = r(); test_ok(a == [1,2])

def r; return *[]; end; *a = r(); test_ok(a == [])
def r; return *[1]; end; *a = r(); test_ok(a == [1])
def r; return *[nil]; end; *a = r(); test_ok(a == [nil])
def r; return *[[]]; end; *a = r(); test_ok(a == [[]])
def r; return *[1,2]; end; *a = r(); test_ok(a == [1,2])
def r; return *[*[]]; end; *a = r(); test_ok(a == [])
def r; return *[*[1]]; end; *a = r(); test_ok(a == [1])
def r; return *[*[1,2]]; end; *a = r(); test_ok(a == [1,2])

def r; return *[[]]; end; *a = *r(); test_ok(a == [[]])
def r; return *[1,2]; end; *a = *r(); test_ok(a == [1,2])
def r; return *[*[1,2]]; end; *a = *r(); test_ok(a == [1,2])

</pre>
          <pre class='console out_txt'>Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  1 (n: )
Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  2 (n: )
Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  3 (n: )
Skip OP=3C
ok 4
Skip OP=3C
ok 5
Skip OP=3C
ok 6
Skip OP=3C
ok 7
Skip OP=3C
ok 8
Skip OP=3C
ok 9
Skip OP=3C
ok 10
Skip OP=3C
ok 11
Skip OP=3C
ok 12
Segmentation fault (core dumped)
[New LWP 36955]
Core was generated by `/home/yhara/work/mrubyc_test/mrubyc/sample_c/mrubyc test/mrubytest.mrb&#39;.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00000000004032f0 in ?? ()
#0  0x00000000004032f0 in ?? ()
#1  0x00007fff8489eb40 in ?? ()
#2  0x000000000060a3e2 in ?? ()
#3  0x008081b78489eb40 in ?? ()
#4  0x000000000060a3c0 in ?? ()
#5  0x0000000200000001 in ?? ()
#6  0x0000000100000003 in ?? ()
#7  0x0080000a0060a210 in ?? ()
#8  0x0000000000000000 in ?? ()
</pre>
          <pre class='console cruby_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
ok 19
ok 20
ok 21
ok 22
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category segv' data-idx='7'>
        test_assignment7.rb
      </h2>
      <div class='test-detail' data-idx='7'>
        
          
          <pre class='console rb_txt'>def r; return; end; a,b,*c = r(); test_ok([a,b,c] == [nil,nil,[]])
def r; return nil; end; a,b,*c = r(); test_ok([a,b,c] == [nil,nil,[]])
def r; return 1; end; a,b,*c = r(); test_ok([a,b,c] == [1,nil,[]])
def r; return []; end; a,b,*c = r(); test_ok([a,b,c] == [nil,nil,[]])
def r; return [1]; end; a,b,*c = r(); test_ok([a,b,c] == [1,nil,[]])
def r; return [nil]; end; a,b,*c = r(); test_ok([a,b,c] == [nil,nil,[]])
def r; return [[]]; end; a,b,*c = r(); test_ok([a,b,c] == [[],nil,[]])
def r; return [1,2]; end; a,b,*c = r(); test_ok([a,b,c] == [1,2,[]])
def r; return [*[]]; end; a,b,*c = r(); test_ok([a,b,c] == [nil,nil,[]])
def r; return [*[1]]; end; a,b,*c = r(); test_ok([a,b,c] == [1,nil,[]])
def r; return [*[1,2]]; end; a,b,*c = r(); test_ok([a,b,c] == [1,2,[]])

def r; return *[]; end; a,b,*c = r(); test_ok([a,b,c] == [nil,nil,[]])
def r; return *[1]; end; a,b,*c = r(); test_ok([a,b,c] == [1,nil,[]])
def r; return *[nil]; end; a,b,*c = r(); test_ok([a,b,c] == [nil,nil,[]])
def r; return *[[]]; end; a,b,*c = r(); test_ok([a,b,c] == [[],nil,[]])
def r; return *[1,2]; end; a,b,*c = r(); test_ok([a,b,c] == [1,2,[]])
def r; return *[*[]]; end; a,b,*c = r(); test_ok([a,b,c] == [nil,nil,[]])
def r; return *[*[1]]; end; a,b,*c = r(); test_ok([a,b,c] == [1,nil,[]])
def r; return *[*[1,2]]; end; a,b,*c = r(); test_ok([a,b,c] == [1,2,[]])

#f = lambda {|r,| test_ok([] == r)}
#f.call([], *[])
#
#f = lambda {|r,*l| test_ok([] == r); test_ok([1] == l)}
#f.call([], *[1])
#
#f = lambda{|x| x}
#test_ok(f.call(42) == 42)
#test_ok(f.call([42]) == [42])
#test_ok(f.call([[42]]) == [[42]])
#test_ok(f.call([42,55]) == [42,55])
#
#f = lambda{|x,| x}
#test_ok(f.call(42) == 42)
#test_ok(f.call([42]) == [42])
#test_ok(f.call([[42]]) == [[42]])
#test_ok(f.call([42,55]) == [42,55])
#
#f = lambda{|*x| x}
#test_ok(f.call(42) == [42])
#test_ok(f.call([42]) == [[42]])
#test_ok(f.call([[42]]) == [[[42]]])
#test_ok(f.call([42,55]) == [[42,55]])
#test_ok(f.call(42,55) == [42,55])
#
#f = lambda { |a, b=42, *c| [a,b,c] }
#test_ok(f.call(1      ) == [1,42,[  ]] )
#test_ok(f.call(1,43   ) == [1,43,[  ]] )
#test_ok(f.call(1,43,44) == [1,43,[44]] )
#
#f = lambda { |a, b=(a|16), *c, &amp;block| [a,b,c,block&amp;&amp;block[]] }
#test_ok(f.call(8      )     == [8,24,[  ],nil] )
#test_ok(f.call(8,43   )     == [8,43,[  ],nil] )
#test_ok(f.call(8,43,44)     == [8,43,[44],nil] )
#test_ok(f.call(8      ){45} == [8,24,[  ],45 ] )
#test_ok(f.call(8,43   ){45} == [8,43,[  ],45 ] )
#test_ok(f.call(8,43,44){45} == [8,43,[44],45 ] )
#
#f = lambda { |a, b=42, *c, d| [a,b,c,d] }
#test_ok(f.call(1      ,99) == [1,42,[  ],99] )
#test_ok(f.call(1,43   ,99) == [1,43,[  ],99] )
#test_ok(f.call(1,43,44,99) == [1,43,[44],99] )
#
#f = lambda { |a, b=(a|16), &amp;block| [a,b,block&amp;&amp;block[]] }
#test_ok(f.call(8   )     == [8,24,nil] )
#test_ok(f.call(8,43)     == [8,43,nil] )
#test_ok(f.call(8,43)     == [8,43,nil] )
#test_ok(f.call(8   ){45} == [8,24,45 ] )
#test_ok(f.call(8,43){45} == [8,43,45 ] )
#test_ok(f.call(8,43){45} == [8,43,45 ] )
#
#f = lambda { |a, b=42, d| [a,b,d] }
#test_ok(f.call(1   ,99) == [1,42,99] )
#test_ok(f.call(1,43,99) == [1,43,99] )
#test_ok(f.call(1,43,99) == [1,43,99] )
#
#f = lambda { |b=42, *c, &amp;block| [b,c,block&amp;&amp;block[]] }
#test_ok(f.call(     )     == [42,[  ],nil] )
#test_ok(f.call(43   )     == [43,[  ],nil] )
#test_ok(f.call(43,44)     == [43,[44],nil] )
#test_ok(f.call(     ){45} == [42,[  ],45 ] )
#test_ok(f.call(43   ){45} == [43,[  ],45 ] )
#test_ok(f.call(43,44){45} == [43,[44],45 ] )
#
#f = lambda { |b=42, *c, d| [b,c,d] }
#test_ok(f.call(      99) == [42,[  ],99] )
#test_ok(f.call(43   ,99) == [43,[  ],99] )
#test_ok(f.call(43,44,99) == [43,[44],99] )
#
#f = lambda { |b=42, &amp;block| [b,block&amp;&amp;block[]] }
#test_ok(f.call(  )     == [42,nil] )
#test_ok(f.call(43)     == [43,nil] )
#test_ok(f.call(43)     == [43,nil] )
#test_ok(f.call(  ){45} == [42,45 ] )
#test_ok(f.call(43){45} == [43,45 ] )
#test_ok(f.call(43){45} == [43,45 ] )
#
#f = lambda { |b=42, d| [b,d] }
#test_ok(f.call(   99) == [42,99] )
#test_ok(f.call(43,99) == [43,99] )
#test_ok(f.call(43,99) == [43,99] )
</pre>
          <pre class='console out_txt'>Skip OP=3A
Skip OP=3A
Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  1 (n: )
Skip OP=3A
Skip OP=3A
Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  2 (n: )
Skip OP=3A
Skip OP=3A
Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  3 (n: )
Skip OP=3A
Skip OP=3A
Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  4 (n: )
Skip OP=3A
Skip OP=3A
Skip OP=3C
no method(+)!
no method(to_s)!
no method(+)!
not ok  5 (n: )
Skip OP=3A
Skip OP=3A
Skip OP=3C
no method(+)!
Segmentation fault (core dumped)
[New LWP 36955]
Core was generated by `/home/yhara/work/mrubyc_test/mrubyc/sample_c/mrubyc test/mrubytest.mrb&#39;.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00000000004032f0 in ?? ()
#0  0x00000000004032f0 in ?? ()
#1  0x00007fff8489eb40 in ?? ()
#2  0x000000000060a3e2 in ?? ()
#3  0x008081b78489eb40 in ?? ()
#4  0x000000000060a3c0 in ?? ()
#5  0x0000000200000001 in ?? ()
#6  0x0000000100000003 in ?? ()
#7  0x0080000a0060a210 in ?? ()
#8  0x0000000000000000 in ?? ()
</pre>
          <pre class='console cruby_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
ok 19
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ng' data-idx='8'>
        test_assignment8.rb
      </h2>
      <div class='test-detail' data-idx='8'>
        
          
          <pre class='console rb_txt'>a,=*[1]
test_ok(a == 1)
a,=*[[1]]
test_ok(a == [1])
a,=*[[[1]]]
test_ok(a == [[1]])

x, (y, z) = 1, 2, 3
test_ok([1,2,nil] == [x,y,z])
x, (y, z) = 1, [2,3]
test_ok([1,2,3] == [x,y,z])
x, (y, z) = 1, [2]
test_ok([1,2,nil] == [x,y,z])

#a = loop do break; end; test_ok(a == nil)
#a = loop do break nil; end; test_ok(a == nil)
#a = loop do break 1; end; test_ok(a == 1)
#a = loop do break []; end; test_ok(a == [])
#a = loop do break [1]; end; test_ok(a == [1])
#a = loop do break [nil]; end; test_ok(a == [nil])
#a = loop do break [[]]; end; test_ok(a == [[]])
#a = loop do break [*[]]; end; test_ok(a == [])
#a = loop do break [*[1]]; end; test_ok(a == [1])
#a = loop do break [*[1,2]]; end; test_ok(a == [1,2])
#
#a = loop do break *[]; end; test_ok(a == [])
#a = loop do break *[1]; end; test_ok(a == [1])
#a = loop do break *[nil]; end; test_ok(a == [nil])
#a = loop do break *[[]]; end; test_ok(a == [[]])
#a = loop do break *[*[]]; end; test_ok(a == [])
#a = loop do break *[*[1]]; end; test_ok(a == [1])
#a = loop do break *[*[1,2]]; end; test_ok(a == [1,2])
#
#*a = loop do break; end; test_ok(a == [nil])
#*a = loop do break nil; end; test_ok(a == [nil])
#*a = loop do break 1; end; test_ok(a == [1])
#*a = loop do break []; end; test_ok(a == [])
#*a = loop do break [1]; end; test_ok(a == [1])
#*a = loop do break [nil]; end; test_ok(a == [nil])
#*a = loop do break [[]]; end; test_ok(a == [[]])
#*a = loop do break [1,2]; end; test_ok(a == [1,2])
#*a = loop do break [*[]]; end; test_ok(a == [])
#*a = loop do break [*[1]]; end; test_ok(a == [1])
#*a = loop do break [*[1,2]]; end; test_ok(a == [1,2])
#
#*a = loop do break *[]; end; test_ok(a == [])
#*a = loop do break *[1]; end; test_ok(a == [1])
#*a = loop do break *[nil]; end; test_ok(a == [nil])
#*a = loop do break *[[]]; end; test_ok(a == [[]])
#*a = loop do break *[1,2]; end; test_ok(a == [1,2])
#*a = loop do break *[*[]]; end; test_ok(a == [])
#*a = loop do break *[*[1]]; end; test_ok(a == [1])
#*a = loop do break *[*[1,2]]; end; test_ok(a == [1,2])
#
#*a = *loop do break *[[]]; end; test_ok(a == [[]])
#*a = *loop do break *[1,2]; end; test_ok(a == [1,2])
#*a = *loop do break *[*[1,2]]; end; test_ok(a == [1,2])
#
#a,b,*c = loop do break; end; test_ok([a,b,c] == [nil,nil,[]])
#a,b,*c = loop do break nil; end; test_ok([a,b,c] == [nil,nil,[]])
#a,b,*c = loop do break 1; end; test_ok([a,b,c] == [1,nil,[]])
#a,b,*c = loop do break []; end; test_ok([a,b,c] == [nil,nil,[]])
#a,b,*c = loop do break [1]; end; test_ok([a,b,c] == [1,nil,[]])
#a,b,*c = loop do break [nil]; end; test_ok([a,b,c] == [nil,nil,[]])
#a,b,*c = loop do break [[]]; end; test_ok([a,b,c] == [[],nil,[]])
#a,b,*c = loop do break [1,2]; end; test_ok([a,b,c] == [1,2,[]])
#a,b,*c = loop do break [*[]]; end; test_ok([a,b,c] == [nil,nil,[]])
#a,b,*c = loop do break [*[1]]; end; test_ok([a,b,c] == [1,nil,[]])
#a,b,*c = loop do break [*[1,2]]; end; test_ok([a,b,c] == [1,2,[]])
#
#a,b,*c = loop do break *[]; end; test_ok([a,b,c] == [nil,nil,[]])
#a,b,*c = loop do break *[1]; end; test_ok([a,b,c] == [1,nil,[]])
#a,b,*c = loop do break *[nil]; end; test_ok([a,b,c] == [nil,nil,[]])
#a,b,*c = loop do break *[[]]; end; test_ok([a,b,c] == [[],nil,[]])
#a,b,*c = loop do break *[1,2]; end; test_ok([a,b,c] == [1,2,[]])
#a,b,*c = loop do break *[*[]]; end; test_ok([a,b,c] == [nil,nil,[]])
#a,b,*c = loop do break *[*[1]]; end; test_ok([a,b,c] == [1,nil,[]])
#a,b,*c = loop do break *[*[1,2]]; end; test_ok([a,b,c] == [1,2,[]])

#def r(val); a = yield(); test_ok(a == val, 2); end
#r(nil){next}
#r(nil){next nil}
#r(1){next 1}
#r([]){next []}
#r([1]){next [1]}
#r([nil]){next [nil]}
#r([[]]){next [[]]}
#r([]){next [*[]]}
#r([1]){next [*[1]]}
#r([1,2]){next [*[1,2]]}
#
#r([]){next *[]}
#r([1]){next *[1]}
#r([nil]){next *[nil]}
#r([[]]){next *[[]]}
#r([]){next *[*[]]}
#r([1]){next *[*[1]]}
#r([1,2]){next *[*[1,2]]}
#
#def r(val); *a = yield(); test_ok(a == val, 2); end
#r([nil]){next}
#r([nil]){next nil}
#r([1]){next 1}
#r([]){next []}
#r([1]){next [1]}
#r([nil]){next [nil]}
#r([[]]){next [[]]}
#r([1,2]){next [1,2]}
#r([]){next [*[]]}
#r([1]){next [*[1]]}
#r([1,2]){next [*[1,2]]}
#
#def r(val); *a = *yield(); test_ok(a == val, 2); end
#r([[]]){next *[[]]}
#r([1,2]){next *[1,2]}
#r([1,2]){next *[*[1,2]]}
#
#def r(val); a,b,*c = yield(); test_ok([a,b,c] == val, 2); end
#r([nil,nil,[]]){next}
#r([nil,nil,[]]){next nil}
#r([1,nil,[]]){next 1}
#r([nil,nil,[]]){next []}
#r([1,nil,[]]){next [1]}
#r([nil,nil,[]]){next [nil]}
#r([[],nil,[]]){next [[]]}
#r([1,2,[]]){next [1,2]}
#r([nil,nil,[]]){next [*[]]}
#r([1,nil,[]]){next [*[1]]}
#r([1,2,[]]){next [*[1,2]]}
#
#def r(val); a,b,*c = *yield(); test_ok([a,b,c] == val, 2); end
#r([[],nil,[]]){next *[[]]}
#r([1,2,[]]){next *[1,2]}
#r([1,2,[]]){next *[*[1,2]]}
</pre>
          <pre class='console out_txt'>Skip OP=3A
no method(+)!
not ok  1 (n: 1)
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  2 (n: )
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  3 (n: )
Skip OP=3A
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  4 (n: )
Skip OP=3A
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  5 (n: )
Skip OP=3A
Skip OP=3A
no method(+)!
no method(to_s)!
no method(+)!
not ok  6 (n: )
</pre>
          <pre class='console cruby_txt'>ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category segv' data-idx='9'>
        test_call.rb
      </h2>
      <div class='test-detail' data-idx='9'>
        
          
          <pre class='console rb_txt'>test_check &quot;call&quot;
def aaa(a, b=100, *rest)
  res = [a, b]
  res += rest if rest
  return res
end

## not enough argument
#begin
#  aaa()				# need at least 1 arg
#  test_ok(false)
#rescue
#  test_ok(true)
#end
#
#begin
#  aaa				# no arg given (exception raised)
#  test_ok(false)
#rescue
#  test_ok(true)
#end

test_ok(aaa(1) == [1, 100])
test_ok(aaa(1, 2) == [1, 2])
test_ok(aaa(1, 2, 3, 4) == [1, 2, 3, 4])
test_ok(aaa(1, *[2, 3, 4]) == [1, 2, 3, 4])


</pre>
          <pre class='console out_txt'>-- call
Segmentation fault (core dumped)
[New LWP 36955]
Core was generated by `/home/yhara/work/mrubyc_test/mrubyc/sample_c/mrubyc test/mrubytest.mrb&#39;.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00000000004032f0 in ?? ()
#0  0x00000000004032f0 in ?? ()
#1  0x00007fff8489eb40 in ?? ()
#2  0x000000000060a3e2 in ?? ()
#3  0x008081b78489eb40 in ?? ()
#4  0x000000000060a3c0 in ?? ()
#5  0x0000000200000001 in ?? ()
#6  0x0000000100000003 in ?? ()
#7  0x0080000a0060a210 in ?? ()
#8  0x0000000000000000 in ?? ()
</pre>
          <pre class='console cruby_txt'>-- call
ok 1
ok 2
ok 3
ok 4
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ok' data-idx='10'>
        test_condition.rb
      </h2>
      <div class='test-detail' data-idx='10'>
        
          
          <pre class='console rb_txt'>test_check &quot;condition&quot;

$x = &#39;0&#39;;

$x == $x &amp;&amp; test_ok(true)
$x != $x &amp;&amp; test_ok(false)
$x == $x || test_ok(false)
$x != $x || test_ok(true)
</pre>
          <pre class='console out_txt'>-- condition
ok 1
ok 2
</pre>
          <pre class='console cruby_txt'>-- condition
ok 1
ok 2
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ok' data-idx='11'>
        test_const.rb
      </h2>
      <div class='test-detail' data-idx='11'>
        
          
          <pre class='console rb_txt'>test_check &quot;const&quot;
TEST1 = 1
TEST2 = 2
test_ok([TEST1,TEST2] == [1,2])

# moduleが実装されていない
#module Const
#  TEST3 = 3
#  TEST4 = 4
#end
#
#module Const2
#  TEST3 = 6
#  TEST4 = 8
#end
#
#include Const
#
#test_ok([TEST1,TEST2,TEST3,TEST4] == [1,2,3,4])
#
#include Const2
#STDERR.print &quot;intentionally redefines TEST3, TEST4\n&quot; if $VERBOSE
#test_ok([TEST1,TEST2,TEST3,TEST4] == [1,2,6,8])


# mrubyで動かない
#test_ok((String &lt;=&gt; Object) == -1)
#test_ok((Object &lt;=&gt; String) == 1)
#test_ok((Array &lt;=&gt; String) == nil)
</pre>
          <pre class='console out_txt'>-- const
ok 1
</pre>
          <pre class='console cruby_txt'>-- const
ok 1
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category segv' data-idx='12'>
        test_float.rb
      </h2>
      <div class='test-detail' data-idx='12'>
        
          
          <pre class='console rb_txt'>test_check &quot;float&quot;
#test_ok(2.6.floor == 2)
#test_ok((-2.6).floor == -3)
#test_ok(2.6.ceil == 3)
#test_ok((-2.6).ceil == -2)
#test_ok(2.6.truncate == 2)
#test_ok((-2.6).truncate == -2)
#test_ok(2.6.round == 3)
#test_ok((-2.4).truncate == -2)
#test_ok((13.4 % 1 - 0.4).abs &lt; 0.0001)
nan = 0.0/0
def nan_test(x,y)
  test_ok(x != y)
  test_ok((x &lt; y) == false)
  test_ok((x &gt; y) == false)
  test_ok((x &lt;= y) == false)
  test_ok((x &gt;= y) == false)
end
nan_test(nan, nan)
nan_test(nan, 0)
nan_test(nan, 1)
nan_test(nan, -1)
nan_test(nan, 1000)
nan_test(nan, -1000)
nan_test(nan, 1_000_000_000_000)
nan_test(nan, -1_000_000_000_000)
nan_test(nan, 100.0);
nan_test(nan, -100.0);
nan_test(nan, 0.001);
nan_test(nan, -0.001);
nan_test(nan, 1.0/0);
nan_test(nan, -1.0/0);

#s = &quot;3.7517675036461267e+17&quot;
#test_ok(s == sprintf(&quot;%.16e&quot;, s.to_f))
f = 3.7517675036461267e+17
test_ok(f == sprintf(&quot;%.16e&quot;, f).to_f)



</pre>
          <pre class='console out_txt'>-- float
ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
ok 19
ok 20
ok 21
ok 22
ok 23
ok 24
ok 25
ok 26
ok 27
ok 28
ok 29
ok 30
ok 31
ok 32
ok 33
ok 34
ok 35
ok 36
ok 37
ok 38
ok 39
ok 40
ok 41
ok 42
ok 43
ok 44
ok 45
ok 46
ok 47
ok 48
ok 49
ok 50
ok 51
ok 52
ok 53
ok 54
ok 55
ok 56
ok 57
ok 58
ok 59
ok 60
ok 61
ok 62
ok 63
ok 64
ok 65
ok 66
ok 67
ok 68
ok 69
ok 70
no method(sprintf)!
no method(to_f)!
Segmentation fault (core dumped)
[New LWP 36955]
Core was generated by `/home/yhara/work/mrubyc_test/mrubyc/sample_c/mrubyc test/mrubytest.mrb&#39;.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  0x00000000004032f0 in ?? ()
#0  0x00000000004032f0 in ?? ()
#1  0x00007fff8489eb40 in ?? ()
#2  0x000000000060a3e2 in ?? ()
#3  0x008081b78489eb40 in ?? ()
#4  0x000000000060a3c0 in ?? ()
#5  0x0000000200000001 in ?? ()
#6  0x0000000100000003 in ?? ()
#7  0x0080000a0060a210 in ?? ()
#8  0x0000000000000000 in ?? ()
</pre>
          <pre class='console cruby_txt'>-- float
ok 1
ok 2
ok 3
ok 4
ok 5
ok 6
ok 7
ok 8
ok 9
ok 10
ok 11
ok 12
ok 13
ok 14
ok 15
ok 16
ok 17
ok 18
ok 19
ok 20
ok 21
ok 22
ok 23
ok 24
ok 25
ok 26
ok 27
ok 28
ok 29
ok 30
ok 31
ok 32
ok 33
ok 34
ok 35
ok 36
ok 37
ok 38
ok 39
ok 40
ok 41
ok 42
ok 43
ok 44
ok 45
ok 46
ok 47
ok 48
ok 49
ok 50
ok 51
ok 52
ok 53
ok 54
ok 55
ok 56
ok 57
ok 58
ok 59
ok 60
ok 61
ok 62
ok 63
ok 64
ok 65
ok 66
ok 67
ok 68
ok 69
ok 70
ok 71
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ok' data-idx='13'>
        test_if_unless.rb
      </h2>
      <div class='test-detail' data-idx='13'>
        
          
          <pre class='console rb_txt'>test_check &quot;if/unless&quot;;

$x = &#39;test&#39;;
test_ok(if $x == $x then true else false end)
$bad = false
unless $x == $x
  $bad = true
end
test_ok(!$bad)
test_ok(unless $x != $x then true else false end)

</pre>
          <pre class='console out_txt'>-- if/unless
ok 1
ok 2
ok 3
</pre>
          <pre class='console cruby_txt'>-- if/unless
ok 1
ok 2
ok 3
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ok' data-idx='14'>
        test_multiple_assignment.rb
      </h2>
      <div class='test-detail' data-idx='14'>
        
          
          <pre class='console rb_txt'>test_check &quot;multiple assignment&quot;

# multiple asignment
a, b = 1, 2
test_ok(a == 1 &amp;&amp; b == 2)

a, b = b, a
test_ok(a == 2 &amp;&amp; b == 1)

a, = 1,2
test_ok(a == 1)

# 未実装のパターンはコメントアウト
#a, *b = 1, 2, 3
#test_ok(a == 1 &amp;&amp; b == [2, 3])

#a, (b, c), d = 1, [2, 3], 4
#test_ok(a == 1 &amp;&amp; b == 2 &amp;&amp; c == 3 &amp;&amp; d == 4)

*a = 1, 2, 3
test_ok(a == [1, 2, 3])

#*a = 4
#test_ok(a == [4])

#*a = nil
#test_ok(a == [nil])

</pre>
          <pre class='console out_txt'>-- multiple assignment
ok 1
ok 2
ok 3
ok 4
</pre>
          <pre class='console cruby_txt'>-- multiple assignment
ok 1
ok 2
ok 3
ok 4
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ok' data-idx='15'>
        test_string.rb
      </h2>
      <div class='test-detail' data-idx='15'>
        
          
          <pre class='console rb_txt'>test_check &quot;string &amp; char&quot;

test_ok(&quot;abcd&quot; == &quot;abcd&quot;)
#test_ok(&quot;abcd&quot; === &quot;abcd&quot;)

#$foo = &quot;abc&quot;
#test_ok(&quot;#{$foo} = abc&quot; == &quot;abc = abc&quot;)
#
#foo = &quot;abc&quot;
#test_ok(&quot;#{foo} = abc&quot; == &quot;abc = abc&quot;)

#test_ok(&#39;-&#39; * 5 == &#39;-----&#39;)
#test_ok(&#39;-&#39; * 1 == &#39;-&#39;)
#test_ok(&#39;-&#39; * 0 == &#39;&#39;)
#
#foo = &#39;-&#39;
#test_ok(foo * 5 == &#39;-----&#39;)
#test_ok(foo * 1 == &#39;-&#39;)
#test_ok(foo * 0 == &#39;&#39;)

# character constants(assumes ASCII)
#test_ok(&quot;a&quot;[0] == ?a)
test_ok(?a == ?a)
test_ok(?\C-a == &quot;\1&quot;)
test_ok(?\M-a == &quot;\341&quot;)
test_ok(?\M-\C-a == &quot;\201&quot;)
#test_ok(&quot;a&quot;.upcase![0] == ?A)
#test_ok(&quot;A&quot;.downcase![0] == ?a)

#$x = &quot;abcdef&quot;
#$y = [ ?a, ?b, ?c, ?d, ?e, ?f ]
#$bad = false
#$x.each_byte {|i|
#  if i.chr != $y.shift
#    $bad = true
#    break
#  end
#}
#test_ok(!$bad)

#s = &lt;&lt;EOS
##{
#[1,2,3].join(&quot;,&quot;)
#}
#EOS
#test_ok(s == &quot;1,2,3\n&quot;)
# to_iの引数は実装されていない
#test_ok(&quot;Just&quot;.to_i(36) == 926381)
#test_ok(1299022.to_s(36) == &quot;ruby&quot;)
#test_ok(-1045307475.to_s(36) == &quot;-hacker&quot;)
</pre>
          <pre class='console out_txt'>-- string &amp; char
ok 1
ok 2
ok 3
ok 4
ok 5
</pre>
          <pre class='console cruby_txt'>-- string &amp; char
ok 1
ok 2
ok 3
ok 4
ok 5
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ok' data-idx='16'>
        test_variable.rb
      </h2>
      <div class='test-detail' data-idx='16'>
        
          
          <pre class='console rb_txt'>test_check &quot;variable&quot;

foobar = &quot;foobar&quot;
$foobar = foobar
test_ok($foobar == foobar)

#class Gods
#  @@rule = &quot;Uranus&quot;		# private to Gods
#  def ruler0
#    @@rule
#  end
#
#  def self.ruler1		# &lt;= per method definition style
#    @@rule
#  end
#  class &lt;&lt; self			# &lt;= multiple method definition style
#    def ruler2
#      @@rule
#    end
#  end
#end
#
#module Olympians
#  @@rule =&quot;Zeus&quot;
#  def ruler3
#    @@rule
#  end
#end
#
#class Titans &lt; Gods
#  @@rule = &quot;Cronus&quot;		# do not affect @@rule in Gods
#  include Olympians
#  def ruler4
#    @@rule
#  end
#end
#
#test_ok(Gods.new.ruler0 == &quot;Cronus&quot;)
#test_ok(Gods.ruler1 == &quot;Cronus&quot;)
#test_ok(Gods.ruler2 == &quot;Cronus&quot;)
#test_ok(Titans.ruler1 == &quot;Cronus&quot;)
#test_ok(Titans.ruler2 == &quot;Cronus&quot;)
#atlas = Titans.new
#test_ok(atlas.ruler0 == &quot;Cronus&quot;)
#test_ok(atlas.ruler3 == &quot;Zeus&quot;)
#test_ok(atlas.ruler4 == &quot;Cronus&quot;)
</pre>
          <pre class='console out_txt'>-- variable
ok 1
</pre>
          <pre class='console cruby_txt'>-- variable
ok 1
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  
    <div>
      <h2 class='test-category ok' data-idx='17'>
        test_while_until.rb
      </h2>
      <div class='test-detail' data-idx='17'>
        
          
          <pre class='console rb_txt'>test_check &quot;while/until&quot;;

# test break
i = 0
while i &lt; 10
  break if i == 3
  i += 1
end
test_ok(i == 3)

# test next
$bad = false
i = 0
while i &lt; 10
  i += 1
  next if i == 3
  $bad = 1 if i == 3
end
test_ok(!$bad)

# test redo
sum = 0
i = 0
while i &lt; 3
  sum += i
  redo if sum == 1
  i += 1
end
test_ok(sum == 4)

# test until
i = 0
until i&gt;4
  i+=1
end
test_ok(i==5)

</pre>
          <pre class='console out_txt'>-- while/until
ok 1
ok 2
ok 3
ok 4
</pre>
          <pre class='console cruby_txt'>-- while/until
ok 1
ok 2
ok 3
ok 4
</pre>
          <br style='clear:both'>
        
      </div>
    </div>
  

  <script type='text/javascript'>
    $(function(){
      $('.test-category').each(function(){
        var idx = $(this).data('idx');
        $(this).click(function() {
          $('.test-detail[data-idx='+idx+']').toggle();
        });
      });
    });
  </script>

</body>
</html>

